@using Cocus.Domain.ViewModels
@model Cocus.Domain.DTOs.FlightReportDto

@{
    ViewData["Title"] = "Home Page";
    
    TableViewModel tableModel = new TableViewModel
    {
        Headers = new List<string> { "Flight #", "Route", "Aircraft", "Departure", "Distance (km)", "Flight Time (h)", "Fuel (L)", "Status" },
        Rows = Model.Flights.Select(flight => new TableRow
        {
            Values = new List<string>
            {
                flight.FlightNumber,
                $"{flight.DepartureAirportCode} → {flight.DestinationAirportCode}",
                $"{flight.AircraftModel} {flight.AircraftRegistration}",
                flight.ScheduledDeparture.ToString("yyyy-MM-dd HH:mm"),
                flight.DistanceKm.ToString("N2"),
                flight.EstimatedFlightTimeHours.ToString("F2"),
                flight.FuelRequiredLiters.ToString("N2"),
                flight.Status
            }
        }),
        ShowActions = false,
        EmptyStateIcon = "analytics",
        EmptyStateMessage = "No flight data available for reporting."
    };
}

<div class="md-card bg-surface">
    <div class="card-header">
        <h2 class="md-typescale-title-large">
            <span class="material-symbols-outlined">avg_pace</span>
            Average Statistics
        </h2>
    </div>
    <div class="stats-grid">
        <div class="stat-item">
            <p class="md-typescale-body-small stat-label">Average Distance per Flight</p>
            <p class="md-typescale-headline-small stat-value">@Model.AverageDistanceKm.ToString("N2") km</p>
        </div>
        <div class="stat-item">
            <p class="md-typescale-body-small stat-label">Average Fuel per Flight</p>
            <p class="md-typescale-headline-small stat-value">@Model.AverageFuelLiters.ToString("N2") L</p>
        </div>
    </div>
</div>

<div class="metrics-grid">
    <div class="md-card metric-card primary">
        <span class="material-symbols-outlined metric-icon on-primary-container">flight</span>
        <p class="md-typescale-headline-medium metric-value on-primary-container">@Model.TotalFlights</p>
        <p class="md-typescale-body-medium metric-label on-primary-container">Total Flights</p>
    </div>

    <div class="md-card metric-card secondary">
        <span class="material-symbols-outlined metric-icon on-secondary-container">straighten</span>
        <p class="md-typescale-headline-medium metric-value on-secondary-container">@Model.TotalDistanceKm.ToString("N0")</p>
        <p class="md-typescale-body-medium metric-label on-secondary-container">Total Distance (km)</p>
    </div>

    <div class="md-card metric-card tertiary">
        <span class="material-symbols-outlined metric-icon on-tertiary-container">local_gas_station</span>
        <p class="md-typescale-headline-medium metric-value on-tertiary-container">@Model.TotalFuelLiters.ToString("N0")</p>
        <p class="md-typescale-body-medium metric-label on-tertiary-container">Total Fuel (L)</p>
    </div>

    <div class="md-card metric-card surface">
        <span class="material-symbols-outlined metric-icon">schedule</span>
        <p class="md-typescale-headline-medium metric-value">@Model.TotalFlightTimeHours.ToString("N1")</p>
        <p class="md-typescale-body-medium metric-label text-muted">Total Flight Time (h)</p>
    </div>
</div>

<div class="md-card table-container">
    <div class="card-header">
        <h2 class="md-typescale-title-large">
            <span class="material-symbols-outlined">list</span>
            Flight Details
        </h2>
    </div>
    
    @await Html.PartialAsync("_DataTable", tableModel)
</div>