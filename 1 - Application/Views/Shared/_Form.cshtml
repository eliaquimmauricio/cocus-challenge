@model Cocus.Domain.DTOs.FormDto

<div class="md-card form-container">
    <div class="page-header">
        <h1>
            @Model.PageTitle
        </h1>
    </div>

    <form asp-action="@Model.Mode.ToString()" asp-controller="@Model.ControllerName" method="post">
        @Html.AntiForgeryToken()
        <input type="hidden" asp-for="@Model.Id" />
       
        <div class="form-grid">
            @foreach (var item in Model.Fields)
            {
                <div class="form-row">
                    <div class="form-group">
                        <label for="@item.Name" class="md-typescale-body-large form-label">
                            @item.Label
                        </label>
                        <input name="@item.Name" 
                               value="@item.Value"
                               class="md-typescale-body-medium form-input" 
                               placeholder="@item.PlaceHolder"
                               readonly="@Model.IsReadOnly" />
                        <span class="form-error"></span>
                    </div>
                </div>
            }
        </div>

        <div class="form-actions">
            @if (Model.IsDelete)
            {
                <md-filled-button type="button" onclick="submitForm(event)" style="--md-filled-button-container-color: var(--md-sys-color-error);">
                    Delete
                </md-filled-button>
            }
            else if (!Model.IsReadOnly)
            {
                <md-filled-button type="button" onclick="submitForm(event)">
                    Save
                </md-filled-button>
            }

            <md-outlined-button type="button" onclick="window.location.href='@Model.CancelUrl'">
                Cancel
            </md-outlined-button>
        </div>
    </form>
</div>

<script>
    function submitForm(event) {
        const button = event.target;
        const form = button.closest('form');
        if (form) {
            form.submit();
        }
    }
</script>
